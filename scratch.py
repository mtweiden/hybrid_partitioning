from numpy import array

qasm_1 = 'OPENQASM 2.0;\ninclude "qelib1.inc";\nqreg q[3];\n\nu3(4.712388980384701, 3.6465297632306672, 2.4503724054095937) q[0];\nu3(3.1415926503867615, 1.687917246455156, 0.9025190830577074) q[1];\nu3(1.0229370547017376, 1.5707581573812124, 4.7123567487247655) q[2];\ncx q[0], q[2];\nu3(1.5707963267948968, 5.305076577492695, 2.636655543948919) q[0];\nrx(1.5707963267948966) q[2];\nrz(4.71238898038469) q[2];\nrx(1.5707963267948966) q[2];\nrz(3.895787257845606) q[2];\ncx q[2], q[1];\nrx(1.5707963267948966) q[1];\nrz(3.1415926503646663) q[1];\nrx(1.5707963267948966) q[1];\nrz(2.356194487537287) q[1];\nu3(1.4233410275820961, 3.3574499510382054, 0.35243801009393066) q[2];\ncx q[2], q[0];\nrx(1.5707963267948966) q[0];\nrz(3.141592653589808) q[0];\nrx(1.5707963267948966) q[0];\nrz(5.929807950769678) q[0];\nu3(3.604677492918141e-05, 1.570796327150184, 6.0673280093758875) q[2];\ncx q[0], q[2];\nu3(5.951210483791757, 1.1031315252611624, 0.7988286261191473) q[0];\nrx(1.5707963267948966) q[2];\nrz(6.2831610312997626) q[2];\nrx(1.5707963267948966) q[2];\nrz(4.939163355738871) q[2];\ncx q[2], q[1];\nrx(1.5707963267948966) q[1];\nrz(2.3561944910907937) q[1];\nrx(1.5707963267948966) q[1];\nrz(5.204329333115325) q[1];\nu3(4.712405611439982, 3.1416328045089807, 0.7586123033539286) q[2];\ncx q[1], q[2];\nu3(3.141592658769798, 2.7856449249518453, 3.7202743848638087) q[1];\nrx(1.5707963267948966) q[2];\nrz(3.141649435564412) q[2];\nrx(1.5707963267948966) q[2];\nrz(4.405317656608666) q[2];\ncx q[2], q[0];\nrx(1.5707963267948966) q[0];\nrz(0.0) q[0];\nrx(1.5707963267948966) q[0];\nrz(6.2831853071795845) q[0];\nu3(1.152910457190461, 1.5707963267949037, 3.4486874972298214) q[2];\ncx q[1], q[2];\nu3(1.5707963267948968, 5.4977871440467965, 1.42656981262058) q[1];\nrx(1.5707963267948966) q[2];\nrz(4.712388980384684) q[2];\nrx(1.5707963267948966) q[2];\nrz(0.5839601306618789) q[2];\n\n'
block_1 = array([[ 3.53553391e-01+0.00000000e+00j,  3.53553391e-01-4.32978028e-17j,
         3.53553391e-01-4.32978028e-17j,  3.53553391e-01-9.88089540e-17j,
         3.53553391e-01-4.32978028e-17j,  3.53553391e-01-1.21802426e-16j,
         3.53553391e-01-1.21802426e-16j,  3.53553391e-01-8.25501143e-17j],
       [ 3.53553391e-01+0.00000000e+00j, -3.53553391e-01+3.92523115e-17j,
         1.17756934e-16+3.53553391e-01j, -1.96261557e-16-3.53553391e-01j,
         2.50000000e-01+2.50000000e-01j, -2.50000000e-01-2.50000000e-01j,
        -2.50000000e-01+2.50000000e-01j,  2.50000000e-01-2.50000000e-01j],
       [ 3.53553391e-01+0.00000000e+00j,  3.53553391e-01-5.55111512e-17j,
        -3.53553391e-01+2.77555756e-17j, -3.53553391e-01+8.32667268e-17j,
         1.11022302e-16+3.53553391e-01j,  1.11022302e-16+3.53553391e-01j,
        -1.11022302e-16-3.53553391e-01j, -1.66533454e-16-3.53553391e-01j],
       [ 3.53553391e-01+0.00000000e+00j, -3.53553391e-01+5.55111512e-17j,
        -8.32667268e-17-3.53553391e-01j,  1.66533454e-16+3.53553391e-01j,
        -2.50000000e-01+2.50000000e-01j,  2.50000000e-01-2.50000000e-01j,
         2.50000000e-01+2.50000000e-01j, -2.50000000e-01-2.50000000e-01j],
       [ 3.53553391e-01+0.00000000e+00j,  3.53553391e-01-4.32978028e-17j,
         3.53553391e-01-4.32978028e-17j,  3.53553391e-01-9.88089540e-17j,
        -3.53553391e-01+4.32978028e-17j, -3.53553391e-01+1.21802426e-16j,
        -3.53553391e-01+1.21802426e-16j, -3.53553391e-01+8.25501143e-17j],
       [ 3.53553391e-01+0.00000000e+00j, -3.53553391e-01+3.92523115e-17j,
         1.17756934e-16+3.53553391e-01j, -1.96261557e-16-3.53553391e-01j,
        -2.50000000e-01-2.50000000e-01j,  2.50000000e-01+2.50000000e-01j,
         2.50000000e-01-2.50000000e-01j, -2.50000000e-01+2.50000000e-01j],
       [ 3.53553391e-01+0.00000000e+00j,  3.53553391e-01-5.55111512e-17j,
        -3.53553391e-01+5.55111512e-17j, -3.53553391e-01+1.11022302e-16j,
        -1.38777878e-16-3.53553391e-01j, -8.32667268e-17-3.53553391e-01j,
         1.38777878e-16+3.53553391e-01j,  1.94289029e-16+3.53553391e-01j],
       [ 3.53553391e-01+0.00000000e+00j, -3.53553391e-01+5.55111512e-17j,
        -1.11022302e-16-3.53553391e-01j,  1.66533454e-16+3.53553391e-01j,
         2.50000000e-01-2.50000000e-01j, -2.50000000e-01+2.50000000e-01j,
        -2.50000000e-01-2.50000000e-01j,  2.50000000e-01+2.50000000e-01j]])

from bqskit.ir.lang.qasm2.qasm2 import OPENQASM2Language
from bqskit import Circuit

c = OPENQASM2Language().decode(qasm)
qasm_unitary = c.get_unitary().get_numpy()

from scipy.linalg import norm
print(norm(unitary - qasm_unitary))